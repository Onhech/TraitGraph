% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/TG_doughnut.R
\name{TG_doughnut_chart}
\alias{TG_doughnut_chart}
\title{Create and Save a Doughnut Chart for Votes/Opinion Data}
\usage{
TG_doughnut_chart(
  dataset,
  column_name,
  name_col = "name",
  color_col = "favourite_color",
  title = NULL,
  show_title = TRUE,
  title_face = "bold",
  title_color = "grey30",
  color_mode = c("favorite", "midpoint"),
  midpoint_color = "#00A878",
  midpoint_lighten_max = 0.75,
  midpoint_lighten_power = 2,
  midpoint_label_color = c("base", "shade"),
  sort_order = "asc",
  inner_label_threshold = 5,
  outer_label_threshold = NULL,
  footnote_text_width = 65,
  footnote_size = 12,
  footnote_hjust = 0,
  footnote_vjust = 1,
  footnote_lineheight = 1.3,
  footnote_margin_t = -42,
  plot_margin = 20,
  label_radius_base = 2.9,
  label_nudge_bottom = TRUE,
  hole_size = 0.5,
  name_size_mod = 1,
  title_size_mod = 1,
  title_vjust_mod = 0,
  output_path = "doughnut_plot.png",
  output_width = 7,
  output_height = 7,
  output_dpi = 300,
  save_plot = TRUE,
  show_plot = TRUE,
  verbose = FALSE
)
}
\arguments{
\item{dataset}{A data frame containing the data to plot.}

\item{column_name}{The name of the column containing the numeric values.}

\item{name_col}{The name of the column containing unique identifiers (e.g., names). Defaults to "names".}

\item{color_col}{The name of the column containing hex color codes. Defaults to "favourite_color".}

\item{title}{A string for the plot's main title. If NULL, \code{column_name} is used.}

\item{show_title}{Logical. If TRUE (default), the title is displayed. Set to FALSE to hide.}

\item{title_face}{The font style of the title (e.g., \code{plain}, \code{bold}). Defaults to \code{bold}.}

\item{title_color}{The color of the title text.}

\item{color_mode}{A string specifying how slice colors are chosen: \code{"favorite"} (default) uses the provided color column, \code{"midpoint"} shades a single base color across slices.}

\item{midpoint_color}{Single hex color used when \code{color_mode = "midpoint"}; darkest slice. Defaults to \code{"#00A878"}.}

\item{midpoint_lighten_max}{Numeric between 0 and 1; maximum lightening toward white for the lightest slice when \code{color_mode = "midpoint"}. Defaults to 0.75.}

\item{midpoint_lighten_power}{Numeric >= 0 controlling the curve of lightening across ranks; values > 1 make lightening drop off faster from the top slice. Defaults to 2.}

\item{midpoint_label_color}{Choose \code{"base"} (default) to color labels with the base color darkened, or \code{"shade"} to color labels with the shaded slice color (darkened) when \code{color_mode = "midpoint"}.}

\item{sort_order}{The order to sort the results (\code{desc} or \code{asc}). Defaults to "desc".}

\item{inner_label_threshold}{A numeric value (0-100). Percentage labels for slices
smaller than this value will be replaced by an asterisk. Defaults to 5.}

\item{outer_label_threshold}{A numeric value (0-100). Name labels for slices smaller
than this value will be hidden. Defaults to the same value as \code{inner_label_threshold}.}

\item{footnote_text_width}{The acceptable character width of each line in the footnote. Defaults to 50.}

\item{footnote_size}{The font size for the footnote text. Defaults to 12.}

\item{footnote_hjust}{The horizontal justification of the footnote (0-1). Defaults to 0.5 (center).}

\item{footnote_vjust}{The vertical justification of the footnote. Defaults to 0.}

\item{footnote_lineheight}{The line height for multi-line footnotes. Defaults to 1.3.}

\item{footnote_margin_t}{Numeric. The top margin (space) above the footnote. Defaults to 15. Smaller values move the footnote up.}

\item{plot_margin}{Numeric or length-4 numeric vector applied to plot margins (top, right, bottom, left). Defaults to 20 on all sides.}

\item{label_radius_base}{Baseline radial position for outer labels. Defaults to 2.9 (lower to pull labels closer).}

\item{label_nudge_bottom}{Logical; if TRUE (default) slightly nudges labels near 6 o'clock to reduce overlap.}

\item{hole_size}{Numeric value between 0 and 1 to control the size of the doughnut's hole. Defaults to 0.5.}

\item{name_size_mod}{A multiplier to adjust the final label font size (e.g., 1 = default, 1.2 = 20\% larger).}

\item{title_size_mod}{A numeric value to add or subtract from the dynamically calculated title font size.}

\item{title_vjust_mod}{A numeric value to add or subtract from the dynamically calculated title's vertical adjustment.}

\item{output_path}{The file path for saving the plot.}

\item{output_width}{The width of the saved image in inches (default = 7).}

\item{output_height}{The height of the saved image in inches (default = 7).}

\item{output_dpi}{The resolution for the saved image (default = 300).}

\item{save_plot}{Logical. If TRUE, the plot is saved.}

\item{show_plot}{Logical. If TRUE, the plot is displayed.}
}
\value{
Invisibly returns the ggplot object.
}
\description{
This function takes a dataset and creates a doughnut chart to represent the
proportional breakdown of a numeric column. It includes robust logic for
label placement, coloring, and dynamic title formatting to ensure readability.
It also automatically generates a legend in the caption for categories
that fall below a certain threshold.
}
